<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Painel ‚Ä¢ Mini Site do Amor (Drive + Sheets)</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0c0a13; --ink:#fff; --mut:#cfcada; --line:#2b2a3f; --card:#181827;
      --a:#ff77a9; --b:#9b87ff; --shadow:0 12px 30px rgba(0,0,0,.35),0 8px 24px rgba(155,135,255,.18);
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 560px at 12% -10%, rgba(155,135,255,.16), transparent 60%), radial-gradient(900px 420px at 110% 10%, rgba(255,119,169,.12), transparent 60%), linear-gradient(#0b0a13,#0f0d19); color:var(--ink); font-family:Inter,system-ui,Arial,sans-serif; -webkit-font-smoothing:antialiased}
    .wrap{max-width:1180px;margin:0 auto;padding:0 clamp(14px,3vw,24px)}

    header{position:sticky;top:0;z-index:40;background:linear-gradient(180deg,rgba(12,10,19,.9),rgba(12,10,19,.6));backdrop-filter:saturate(160%) blur(8px);border-bottom:1px solid rgba(255,255,255,.06)}
    .head{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px}
    .badge{width:38px;height:38px;border-radius:12px;background:linear-gradient(135deg,var(--b),var(--a));display:grid;place-items:center;box-shadow:var(--shadow)}
    h1{margin:0;font-size:clamp(16px,2.2vw,20px)}

    main{padding:18px 0}
    .grid{display:grid;grid-template-columns:1.05fr .95fr;gap:18px}
    @media (max-width:980px){.grid{grid-template-columns:1fr}}

    .panel{background:linear-gradient(180deg,#1a1a2b,#151525); border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow); overflow:hidden}
    .panel header{padding:12px 14px; border-bottom:1px solid var(--line); font-weight:800}
    .panel .bd{padding:14px}
    .rows{display:grid;gap:12px}
    .row-h{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:720px){.row-h{grid-template-columns:1fr}}
    label{font-size:13px;color:#eae6ff}
    input[type=text],input[type=url],input[type=date],textarea{width:100%; background:#1a1a2a; color:#fff; border:1px solid #32304a; border-radius:10px; padding:10px 12px}
    textarea{min-height:110px; resize:vertical}
    input[type=file]{width:100%}
    .small{font-size:12px;color:var(--mut)}

    .thumbs{display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:10px}
    .card{position:relative;background:#121222;border:1px solid #2f2e46;border-radius:14px;overflow:hidden}
    .card img{width:100%;height:110px;object-fit:cover;display:block}
    .card .cap{padding:8px}
    .card .cap input{width:100%;padding:8px;border-radius:10px;border:1px solid #31304a;background:#1a1a2a;color:#fff;font-size:12px}
    .card .del{position:absolute;top:6px;right:6px;background:#ff4d6d;border:0;color:#fff;width:24px;height:24px;border-radius:999px;cursor:pointer}
    .card .reorder{position:absolute;bottom:6px;right:6px;display:flex;gap:6px}
    .card .reorder button{background:#27263a;border:1px solid #3a3954;color:#fff;width:24px;height:24px;border-radius:8px;cursor:pointer}

    .phone{position:relative;width:300px;max-width:92vw;aspect-ratio:9/18;border-radius:28px;background:linear-gradient(160deg,#2a2838,#171625);border:1px solid rgba(255,255,255,.08);box-shadow:0 30px 60px rgba(0,0,0,.42);overflow:hidden;margin:0 auto}
    .notch{position:absolute;top:6px;left:50%;transform:translateX(-50%);width:110px;height:18px;background:#0f0e18;border-radius:0 0 12px 12px;border:1px solid rgba(255,255,255,.08)}
    .screen{position:absolute;inset:10px;border-radius:22px;background:linear-gradient(180deg,#0d0c18,#141328);overflow:auto}

    .title{font-weight:800;font-size:20px;text-align:center;margin:18px 8px 10px;background:linear-gradient(90deg,var(--b),var(--a));-webkit-background-clip:text;background-clip:text;color:transparent}
    .frame{width:92%;margin:10px auto 6px;padding:12px;border-radius:22px;background:linear-gradient(#111,#111) padding-box, conic-gradient(from 120deg,var(--a),var(--b),var(--a)) border-box;border:3px solid transparent;box-shadow:0 12px 26px rgba(0,0,0,.45), 0 0 24px rgba(255,119,169,.12);position:relative;overflow:hidden}
    .viewport{position:relative;width:100%;aspect-ratio:4/5;border-radius:16px;overflow:hidden;background:#0f0e18}
    .slide{position:absolute;inset:0;opacity:0;transition:opacity .5s ease}
    .slide.show{opacity:1}
    .slide img{width:100%;height:100%;object-fit:cover}
    .caption{position:absolute;left:0;right:0;bottom:10px;display:flex;justify-content:center}
    .caption span{font-size:12px;background:rgba(0,0,0,.45);padding:6px 10px;border-radius:8px}

    .since{font-size:12px;color:#ddd;opacity:.9;text-align:center;margin:6px 0 0}
    .section{padding:10px 12px 16px}
    .section h3{margin:8px 0 8px;font-size:14px}
    .section p{margin:0 2px 6px;color:#e7e2f9;opacity:.92;line-height:1.6;font-size:13px}
    .ytbox iframe{width:100%;height:170px;border:0;border-radius:12px}

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
    .btn{border:0;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer;color:#fff;background:#27263c}
    .btn-primary{background:linear-gradient(135deg,var(--b),var(--a));box-shadow:var(--shadow)}

    .qr{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-top:10px}
    .qr img{width:180px;height:180px;border-radius:12px;border:1px solid #2f2f45;box-shadow:0 10px 24px rgba(0,0,0,.25)}

    .log{margin-top:10px;font-size:12px;color:#bdb7cc;white-space:pre-wrap;background:#121224;border:1px solid #2f2e46;border-radius:12px;padding:10px}
  </style>
</head>
<body>
  <header>
    <div class="wrap head">
      <div class="brand"><div class="badge">üíú</div><h1>Painel ‚Ä¢ Mini Site do Amor</h1></div>
      <div class="actions">
        <button class="btn" id="btnSign">Entrar com Google</button>
        <button class="btn btn-primary" id="btnSaveAll" disabled>Salvar no Drive + Planilha</button>
        <button class="btn" id="btnDownload">Baixar Mini Site (.html)</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <!-- Configura√ß√µes -->
      <div class="panel">
        <header>Configura√ß√µes</header>
        <div class="bd rows">
          <div class="row-h">
            <div><label>T√≠tulo</label><input id="titleInput" type="text"></div>
            <div><label>Data especial</label><input id="dateInput" type="date"></div>
          </div>
          <div><label>Mensagem</label><textarea id="msgInput"></textarea></div>
          <div><label>YouTube</label><input id="ytInput" type="url"></div>
          <div><label>Fotos</label><input id="filesInput" type="file" accept="image/*" multiple><div id="thumbs" class="thumbs"></div></div>
          <div><label>Link p√∫blico</label><input id="publicUrl" type="url"><div class="qr"><button class="btn" id="genQR">Gerar QR</button><button class="btn" id="saveQR" style="display:none">Baixar QR</button><img id="qr" style="display:none"></div></div>
          <div class="log" id="log">Pronto para criar ‚ú®</div>
        </div>
      </div>

      <!-- Pr√©via -->
      <div class="panel">
        <header>Pr√©via</header>
        <div class="bd">
          <div class="phone">
            <div class="screen">
              <div class="title" id="title">Seu t√≠tulo aqui</div>
              <div class="frame"><div class="viewport" id="viewport"></div></div>
              <div class="since" id="since"></div>
              <div class="section"><h3>Nossa mensagem:</h3><p id="msgOut">Escreva sua mensagem para ver aqui.</p></div>
              <div class="section"><h3>Nossa M√∫sica:</h3><div class="ytbox"><iframe id="ytFrame" allow="autoplay; encrypted-media" allowfullscreen></iframe></div></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://apis.google.com/js/api.js"></script>
  <script>
    const $=s=>document.querySelector(s), $$=s=>[...document.querySelectorAll(s)];
    const state={title:'',date:'',yt:'',msg:'',photos:[]};
    const esc=s=>String(s??'').replace(/[&<>]/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[m]));
    function msSince(d){if(!d)return'';const dd=new Date(d),now=new Date();const days=Math.floor((now-dd)/86400000);return `Juntos h√°: ${days} dias`; }

    const titleInput=$('#titleInput'), dateInput=$('#dateInput'), ytInput=$('#ytInput'), msgInput=$('#msgInput'), filesInput=$('#filesInput');
    const titleEl=$('#title'), sinceEl=$('#since'), ytFrame=$('#ytFrame'), msgOut=$('#msgOut'), viewport=$('#viewport'), thumbs=$('#thumbs'), logEl=$('#log');

    titleInput.addEventListener("input",()=>{state.title=titleInput.value;titleEl.textContent=state.title||"Seu t√≠tulo aqui";});
    dateInput.addEventListener("change",()=>{state.date=dateInput.value;sinceEl.textContent=msSince(state.date);});
    msgInput.addEventListener("input",()=>{state.msg=msgInput.value;msgOut.textContent=state.msg||"Escreva sua mensagem para ver aqui.";});
    ytInput.addEventListener("input",()=>{state.yt=ytInput.value;let id="";try{const u=new URL(state.yt);if(u.hostname.includes("youtu.be"))id=u.pathname.slice(1);else id=u.searchParams.get("v");}catch{}ytFrame.src=id?`https://www.youtube.com/embed/${id}?autoplay=1&mute=1&loop=1&playlist=${id}`:"";});

    filesInput.addEventListener("change",async()=>{for(const f of filesInput.files){const r=new FileReader();r.onload=()=>{state.photos.push({dataURL:r.result,cap:""});draw();};r.readAsDataURL(f);}});

    function draw(){thumbs.innerHTML="";viewport.innerHTML="";state.photos.forEach((p,i)=>{const card=document.createElement("div");card.className="card";card.innerHTML=`<img src="${p.dataURL}"><div class="cap"><input type="text" placeholder="Legenda..." value="${p.cap}"></div>`;card.querySelector("input").oninput=e=>{p.cap=e.target.value;draw();};thumbs.appendChild(card);const slide=document.createElement("div");slide.className="slide show";slide.innerHTML=`<img src="${p.dataURL}"><div class="caption"><span>${p.cap}</span></div>`;viewport.appendChild(slide);});if(!state.photos.length){viewport.innerHTML="<div style='color:#aaa;text-align:center;padding:20px'>Adicione fotos</div>";}}

    // QR
    $('#genQR').onclick=()=>{const url=$('#publicUrl').value;if(!url){alert("Informe a URL");return;}const img=$('#qr');img.src=`https://api.qrserver.com/v1/create-qr-code/?size=320x320&data=${encodeURIComponent(url)}`;img.style.display="block";$('#saveQR').style.display="inline-block";};
    $('#saveQR').onclick=()=>{const a=document.createElement("a");a.href=$('#qr').src;a.download="mini-site-qr.png";a.click();};

    function log(msg){logEl.textContent=msg;}

    // inicial
    draw();
  </script>
</body>
</html>
