<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Painel ‚Ä¢ Mini Site do Amor (Drive + Sheets)</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0c0a13; --ink:#fff; --muted:#cfcada; --line:#2b2a3f; --card:#181827; --a:#ff77a9; --b:#9b87ff; --shadow:0 12px 30px rgba(0,0,0,.35), 0 8px 24px rgba(155,135,255,.18)}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(#0b0a13,#0f0d19); color:var(--ink); font-family:Inter,system-ui,Arial,sans-serif}
    .wrap{max-width:1180px;margin:0 auto;padding:0 clamp(14px,3vw,24px)}
    header{position:sticky;top:0;z-index:30;background:rgba(12,10,19,.9);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,.06)}
    .head{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px}
    .badge{width:38px;height:38px;border-radius:12px;background:linear-gradient(135deg,var(--b),var(--a));display:grid;place-items:center}
    h1{margin:0;font-size:18px}

    main{padding:20px 0}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}

    .panel{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow)}
    .panel header{padding:12px;border-bottom:1px solid var(--line);font-weight:800}
    .panel .bd{padding:14px}
    .rows{display:grid;gap:12px}
    input,textarea{width:100%;background:#1a1a2a;color:#fff;border:1px solid #32304a;border-radius:10px;padding:10px}
    textarea{min-height:100px}
    .thumbs{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px}
    .card{position:relative;border:1px solid #2f2e46;border-radius:12px;overflow:hidden}
    .card img{width:100%;height:100px;object-fit:cover}
    .card button{position:absolute;top:6px;right:6px;background:#ff4d6d;border:0;color:#fff;border-radius:50%;width:22px;height:22px;cursor:pointer}

    .btn{padding:10px 14px;border:0;border-radius:12px;font-weight:700;cursor:pointer;color:#fff;background:#27263c}
    .btn-primary{background:linear-gradient(135deg,var(--b),var(--a))}
    .actions{display:flex;gap:10px;flex-wrap:wrap}

    .phone{position:relative;width:280px;aspect-ratio:9/18;margin:auto;border-radius:22px;background:#111;border:1px solid #333;overflow:hidden}
    .screen{padding:12px}
    .title{font-weight:800;font-size:20px;text-align:center;margin-bottom:10px;background:linear-gradient(90deg,var(--b),var(--a));-webkit-background-clip:text;color:transparent}
    .viewport{position:relative;aspect-ratio:4/5;border-radius:14px;overflow:hidden;background:#222}
    .slide{position:absolute;inset:0;opacity:0;transition:opacity .5s}
    .slide.show{opacity:1}
    .slide img{width:100%;height:100%;object-fit:cover}
    .section{margin-top:12px}
    .ytbox iframe{width:100%;height:180px;border:0;border-radius:12px}

    .log{margin-top:10px;padding:10px;font-size:12px;background:#121224;border:1px solid #2f2e46;border-radius:12px;color:#bbb}

    #hearts{position:fixed;inset:0;pointer-events:auto}
    .heart{position:fixed;top:-10vh;font-size:18px;cursor:pointer;animation:fall 9s linear forwards,sway 9s ease-in-out infinite}
    @keyframes fall{to{transform:translateY(110vh);opacity:0}}
    @keyframes sway{0%,100%{margin-left:-10px}50%{margin-left:10px}}
    .boom{position:fixed;left:0;top:0}
    .spark{position:absolute;opacity:0;animation:spark 700ms ease-out forwards}
    @keyframes spark{20%{opacity:1}100%{opacity:0;transform:translate(var(--tx),var(--ty)) scale(1.2)}}
    .ring{position:absolute;width:8px;height:8px;border:2px solid pink;border-radius:50%;opacity:0;animation:ring 600ms ease-out forwards}
    @keyframes ring{0%{opacity:1;transform:scale(.2)}100%{opacity:0;transform:scale(6)}}
  </style>
</head>
<body>
  <div id="hearts"></div>
  <header>
    <div class="wrap head">
      <div class="brand"><div class="badge">üíú</div><h1>Painel ‚Ä¢ Mini Site do Amor</h1></div>
      <div class="actions">
        <button class="btn" id="btnSign">Entrar com Google</button>
        <button class="btn btn-primary" id="btnSaveAll" disabled>Salvar no Drive + Sheets</button>
        <button class="btn" id="btnDownload">Baixar HTML</button>
      </div>
    </div>
  </header>

  <main class="wrap grid">
    <div class="panel">
      <header>Configura√ß√£o</header>
      <div class="bd rows">
        <input id="titleInput" type="text" placeholder="Nomes / T√≠tulo">
        <textarea id="msgInput" placeholder="Mensagem rom√¢ntica..."></textarea>
        <input id="ytInput" type="url" placeholder="Link do YouTube">
        <input id="filesInput" type="file" accept="image/*" multiple>
        <div id="thumbs" class="thumbs"></div>
        <details>
          <summary>‚öôÔ∏è Configura√ß√£o Google</summary>
          <input id="gApiKey" placeholder="API Key">
          <input id="gClientId" placeholder="Client ID">
          <input id="sheetId" placeholder="ID da Planilha">
          <button class="btn" id="btnSaveCfg">Salvar Configura√ß√£o</button>
        </details>
        <div class="log" id="log">Pronto para criar ‚ú®</div>
      </div>
    </div>

    <div class="panel">
      <header>Pr√©via</header>
      <div class="bd">
        <div class="phone">
          <div class="screen">
            <div class="title" id="title">Seu t√≠tulo</div>
            <div class="viewport" id="viewport"></div>
            <div class="section"><h3>Nossa mensagem:</h3><p id="msgOut"></p></div>
            <div class="section"><h3>Nossa M√∫sica:</h3><div class="ytbox"><iframe id="ytFrame"></iframe></div></div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://apis.google.com/js/api.js"></script>
  <script>
    const $=s=>document.querySelector(s),$$=s=>[...document.querySelectorAll(s)];
    const titleInput=$('#titleInput'),msgInput=$('#msgInput'),ytInput=$('#ytInput'),filesInput=$('#filesInput');
    const titleEl=$('#title'),msgOut=$('#msgOut'),viewport=$('#viewport'),ytFrame=$('#ytFrame'),thumbs=$('#thumbs'),logEl=$('#log');
    const state={title:'',msg:'',yt:'',photos:[]};

    const fileToDataURL=f=>new Promise(r=>{const rd=new FileReader();rd.onload=()=>r({name:f.name,type:f.type,dataURL:rd.result});rd.readAsDataURL(f);});
    const ytId=u=>{try{const x=new URL(u);if(x.hostname.includes('youtu.be'))return x.pathname.slice(1);return x.searchParams.get('v');}catch{return ''}};

    titleInput.oninput=()=>{state.title=titleInput.value;titleEl.textContent=state.title;};
    msgInput.oninput=()=>{state.msg=msgInput.value;msgOut.textContent=state.msg;};
    ytInput.oninput=()=>{state.yt=ytInput.value;const id=ytId(state.yt);ytFrame.src=id?`https://www.youtube.com/embed/${id}?autoplay=1&mute=1&loop=1&playlist=${id}`:'';};

    filesInput.onchange=async()=>{for(const f of filesInput.files)state.photos.push(await fileToDataURL(f));filesInput.value='';renderPhotos();};

    function renderPhotos(){thumbs.innerHTML='';viewport.innerHTML='';state.photos.forEach((p,i)=>{const c=document.createElement('div');c.className='card';c.innerHTML=`<img src='${p.dataURL}'><button data-i='${i}'>‚úï</button>`;thumbs.appendChild(c);c.querySelector('button').onclick=()=>{state.photos.splice(i,1);renderPhotos();};const s=document.createElement('div');s.className='slide'+(i===0?' show':'');s.innerHTML=`<img src='${p.dataURL}'>`;viewport.appendChild(s);});}

    setInterval(()=>{const slides=$$('.slide');if(slides.length<2)return;let i=slides.findIndex(s=>s.classList.contains('show'));slides[i].classList.remove('show');slides[(i+1)%slides.length].classList.add('show');},5000);

    function log(m){logEl.textContent=m;}

    // Download HTML
    $('#btnDownload').onclick=()=>{const html=`<html><body><h1>${state.title}</h1><p>${state.msg}</p></body></html>`;const blob=new Blob([html],{type:'text/html'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='mini-site.html';a.click();};

    // Google Config
    const gApiKey=$('#gApiKey'),gClientId=$('#gClientId'),sheetId=$('#sheetId');
    function saveCfg(){localStorage.setItem('GA_API_KEY',gApiKey.value);localStorage.setItem('GA_CLIENT_ID',gClientId.value);localStorage.setItem('GA_SHEET_ID',sheetId.value);log('Configura√ß√£o salva');}
    $('#btnSaveCfg').onclick=saveCfg;

    // Hearts
    const hearts=$('#hearts');
    function spawn(){const e=document.createElement('span');e.className='heart';e.textContent=Math.random()<.5?'üíñ':'üíò';e.style.left=Math.random()*100+'vw';e.onclick=ev=>explode(ev.clientX,ev.clientY);hearts.appendChild(e);setTimeout(()=>e.remove(),9000);}
    function explode(x,y){const b=document.createElement('div');b.className='boom';b.style.left=x+'px';b.style.top=y+'px';const r=document.createElement('div');r.className='ring';b.appendChild(r);for(let i=0;i<12;i++){const s=document.createElement('span');s.className='spark';s.textContent='üíñ';s.style.setProperty('--tx',Math.random()*100-50+'px');s.style.setProperty('--ty',Math.random()*100-50+'px');b.appendChild(s);}document.body.appendChild(b);setTimeout(()=>b.remove(),800);}
    setInterval(spawn,300);
  </script>
</body>
</html>
